## 计算结果取整修复

在 `StateCalculator.ts` 的 `calculate` 方法中，对所有计算结果添加 `Math.round()` 取整：

```typescript
case 'linear':
  return Math.round(baseValue * (currentPercent / 100));
case 'threshold':
  const threshold = effect.value ?? 50;
  if (currentPercent < threshold) {
    const minPct = effect.minPercent ?? 50;
    return Math.round(baseValue * Math.max(minPct / 100, currentPercent / 100));
  }
  return baseValue;
case 'percentage':
  const penalty = (effect.value ?? 100) / 100;
  return Math.round(baseValue * (1 - (1 - currentPercent / 100) * penalty));
```

这样步兵 HP 50% 时，攻击会从 10 变成 5（而不是 5.0）