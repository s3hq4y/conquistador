# Conquistador 六边形渲染技术文档

## 一、项目使用的六边形类型

项目使用**平顶六边形（Flat-top Hexagon）**，通过以下方式实现：

- **数据层**：使用尖顶六边形坐标系进行计算
- **渲染层**：在 `HexTile.ts:60` 通过 `setLocalEulerAngles(0, 30, 0)` 旋转 30° 显示为平顶六边形

---

## 二、核心实现

### 关键代码位置

| 文件 | 行号 | 说明 |
|------|------|------|
| `HexTile.ts` | 60 | 旋转 30° 实现平顶显示 |
| `HexGrid.ts` | 50-53 | 坐标转换公式（尖顶） |
| `HexTile.ts` | 80 | 顶点角度计算（尖顶） |
| `EdgeSystem.ts` | 217 | 边渲染角度（尖顶） |

### 旋转效果

```
原始几何体（尖顶）         旋转30°后（平顶）

     ●───●                      ╱╲
    ╱     ╲                    ╱  ╲
   ╱       ╲      →           ●    ●
  ●         ●                   ╲  ╱
   ╲       ╱                     ╲╱
    ╲     ╱
     ●───●
```

---

## 三、贴图制作规范

**贴图必须使用平顶六边形格式**！

贴图文件放置在 `public/textures/terrain/` 目录：
- `hex_template.svg` - 平顶六边形模板
- `generate_hex_texture.html` - 平顶贴图生成器
- `{terrain_name}.png` - 各种地形贴图

---

## 四、总结

- 数据计算：尖顶六边形坐标系
- 视觉显示：通过旋转 30° 实现平顶
- 贴图制作：必须使用平顶六边形格式
